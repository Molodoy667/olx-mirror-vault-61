# Исправление проблемы 404 при деплое SPA

## Проблема
При прямом переходе по URL или обновлении страницы в браузере возникает ошибка 404: NOT_FOUND, хотя при навигации внутри приложения все работает корректно.

## Причина
Это типичная проблема SPA (Single Page Application). Сервер пытается найти физический файл по запрашиваемому URL, но в React приложениях все маршруты обрабатываются клиентским роутером.

## Решение

### 1. Для Vercel
Создан файл `vercel.json` с правильной конфигурацией:
- Все маршруты перенаправляются на `index.html`
- Статические ресурсы обслуживаются напрямую
- Добавлены заголовки безопасности и кеширования

### 2. Для Netlify
Создан файл `public/_redirects`:
- SPA fallback для клиентского роутинга
- Правильная обработка статических ресурсов

### 3. Для Apache
Создан файл `public/.htaccess`:
- Rewrite правила для SPA
- GZIP сжатие
- Заголовки кеширования

### 4. Улучшения производительности
- Добавлено разделение чанков в `vite.config.ts`
- Глобальный обработчик ошибок загрузки чанков в `main.tsx`
- Улучшенный `LazyRetry` компонент для обработки ошибок lazy loading

## Файлы, которые были изменены/созданы:

1. `vercel.json` - конфигурация для Vercel
2. `public/_redirects` - конфигурация для Netlify
3. `public/.htaccess` - конфигурация для Apache
4. `vite.config.ts` - улучшенная конфигурация сборки
5. `main.tsx` - глобальные обработчики ошибок
6. `package.json` - добавлен скрипт build:vercel

## Инструкции по деплою

### Vercel
1. Убедитесь, что файл `vercel.json` находится в корне проекта
2. При деплое Vercel автоматически использует эту конфигурацию
3. Используйте команду `npm run build` или `npm run build:vercel`

### Netlify
1. Файл `public/_redirects` автоматически копируется в dist при сборке
2. Netlify автоматически применит правила из этого файла

### Другие хостинги
1. Для Apache используйте файл `public/.htaccess`
2. Для Nginx добавьте в конфигурацию:
```nginx
location / {
  try_files $uri $uri/ /index.html;
}
```

## Проверка исправления
После деплоя:
1. Откройте любую внутреннюю страницу напрямую в браузере
2. Обновите страницу (F5)
3. Оба действия должны работать без ошибок 404

## Дополнительные улучшения
- Добавлено автоматическое разделение кода на чанки
- Улучшена обработка ошибок загрузки чанков
- Добавлены заголовки безопасности
- Настроено кеширование статических ресурсов