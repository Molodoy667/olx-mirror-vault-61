import{u as F,r as o,j as e,k as P,m as D,n as A,o as B,p as R,g as n,L as f,B as U,s as d,t as h}from"./index-KbJkRX07.js";import{I as c}from"./input-BfmWFPkP.js";import{L as u}from"./label-CwWGJCIM.js";import{U as y}from"./user-Dt39FPRe.js";import{M}from"./mail-DjoRd4OW.js";import{L as O}from"./lock-B5C9YPp5.js";import{E as T}from"./eye-off-DmAdVWQx.js";import{E as W}from"./eye-jg7wg44x.js";import{A as C}from"./arrow-right-Dl6NkRd5.js";import{C as N}from"./circle-check-big-HnBDMycv.js";function X(){const j=F(),[t,E]=o.useState(!0),[g,v]=o.useState(!1),[x,S]=o.useState(!1),[a,w]=o.useState({email:"",password:"",fullName:"",username:""}),[r,p]=o.useState({}),k=()=>{const s={};return a.email?/\S+@\S+\.\S+/.test(a.email)||(s.email="Невірний формат email"):s.email="Email обов'язковий",a.password?a.password.length<6&&(s.password="Пароль повинен містити мінімум 6 символів"):s.password="Пароль обов'язковий",t||(a.fullName||(s.fullName="Повне ім'я обов'язкове"),a.username?a.username.length<3&&(s.username="Ім'я користувача повинно містити мінімум 3 символи"):s.username="Ім'я користувача обов'язкове"),p(s),Object.keys(s).length===0},L=async s=>{if(s.preventDefault(),!!k()){v(!0);try{if(t){const{data:l,error:i}=await d.auth.signInWithPassword({email:a.email,password:a.password});if(i)throw i;l.user&&(h({title:"Успішно!",description:"Ви увійшли в систему"}),j("/"))}else{const{data:l,error:i}=await d.auth.signUp({email:a.email,password:a.password,options:{emailRedirectTo:`${window.location.origin}/`,data:{full_name:a.fullName,username:a.username}}});if(i)throw i;if(l.user){const{error:b}=await d.from("profiles").insert({id:l.user.id,full_name:a.fullName,username:a.username});b&&console.error("Profile creation error:",b),h({title:"Реєстрація успішна!",description:"Ви можете увійти в систему"});const{error:I}=await d.auth.signInWithPassword({email:a.email,password:a.password});I||j("/")}}}catch(l){h({title:"Помилка",description:l.message||"Щось пішло не так",variant:"destructive"})}finally{v(!1)}}},m=(s,l)=>{w({...a,[s]:l}),r[s]&&p({...r,[s]:""})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 flex items-center justify-center px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[e.jsxs(P,{className:"backdrop-blur-sm bg-card/95 shadow-xl border-border/50",children:[e.jsxs(D,{className:"space-y-1 text-center pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:"Novado"})}),e.jsx(A,{className:"text-2xl font-semibold",children:t?"Вітаємо знову!":"Створити акаунт"}),e.jsx(B,{className:"text-muted-foreground",children:t?"Увійдіть, щоб продовжити роботу з Novado":"Приєднуйтеся до спільноти Novado"})]}),e.jsxs(R,{children:[e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[!t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"fullName",className:"text-sm font-medium",children:"Повне ім'я"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"fullName",type:"text",placeholder:"Введіть ваше повне ім'я",value:a.fullName,onChange:s=>m("fullName",s.target.value),className:n("pl-10",r.fullName&&"border-red-500 focus-visible:ring-red-500")})]}),r.fullName&&e.jsx("p",{className:"text-sm text-red-500",children:r.fullName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"username",className:"text-sm font-medium",children:"Ім'я користувача"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"username",type:"text",placeholder:"Введіть ім'я користувача",value:a.username,onChange:s=>m("username",s.target.value),className:n("pl-10",r.username&&"border-red-500 focus-visible:ring-red-500")})]}),r.username&&e.jsx("p",{className:"text-sm text-red-500",children:r.username})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"email",type:"email",placeholder:"Введіть ваш email",value:a.email,onChange:s=>m("email",s.target.value),className:n("pl-10",r.email&&"border-red-500 focus-visible:ring-red-500")})]}),r.email&&e.jsx("p",{className:"text-sm text-red-500",children:r.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"password",className:"text-sm font-medium",children:"Пароль"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"password",type:x?"text":"password",placeholder:t?"Введіть ваш пароль":"Створіть надійний пароль",value:a.password,onChange:s=>m("password",s.target.value),className:n("pl-10 pr-10",r.password&&"border-red-500 focus-visible:ring-red-500")}),e.jsx("button",{type:"button",onClick:()=>S(!x),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground transition-colors",children:x?e.jsx(T,{className:"w-4 h-4"}):e.jsx(W,{className:"w-4 h-4"})})]}),r.password&&e.jsx("p",{className:"text-sm text-red-500",children:r.password})]}),t&&e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{to:"/forgot-password",className:"text-sm text-primary hover:underline font-medium",children:"Забули пароль?"})}),e.jsx(U,{type:"submit",className:"w-full h-11 font-medium",disabled:g,children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Зачекайте..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[t?"Увійти":"Зареєструватися",e.jsx(C,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-border/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"Немає облікового запису?":"Вже є обліковий запис?"}),e.jsxs("button",{type:"button",onClick:()=>{E(!t),p({}),w({email:"",password:"",fullName:"",username:""})},className:"mt-2 text-primary hover:underline font-semibold inline-flex items-center gap-1",children:[t?"Зареєструватися":"Увійти",e.jsx(C,{className:"w-3 h-3"})]})]})}),!t&&e.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg border border-border/50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(N,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Безкоштовна реєстрація"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(N,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Миттєвий доступ до всіх функцій"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(N,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Безпечне зберігання даних"})]})]})})]})]}),e.jsxs("p",{className:"text-center text-xs text-muted-foreground mt-6",children:["Реєструючись, ви погоджуєтесь з нашими"," ",e.jsx(f,{to:"/terms",className:"text-primary hover:underline",children:"Умовами використання"})," ","та"," ",e.jsx(f,{to:"/privacy",className:"text-primary hover:underline",children:"Політикою конфіденційності"})]})]})})}export{X as default};
