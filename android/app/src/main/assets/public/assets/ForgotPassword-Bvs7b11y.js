import{r as n,j as e,k as x,m as u,n as h,o as f,p,B as m,L as o,g as C,s as j,t as d}from"./index-KbJkRX07.js";import{I as E}from"./input-BfmWFPkP.js";import{L}from"./label-CwWGJCIM.js";import{C as F}from"./circle-check-big-HnBDMycv.js";import{S as b}from"./send-D3STE-AU.js";import{A as N}from"./arrow-left-8vQ30E0Z.js";import{M as B}from"./mail-DjoRd4OW.js";function $(){const[r,g]=n.useState(""),[i,l]=n.useState(!1),[v,w]=n.useState(!1),[c,a]=n.useState(""),y=s=>/\S+@\S+\.\S+/.test(s),k=async s=>{if(s.preventDefault(),!r){a("Email обов'язковий");return}if(!y(r)){a("Невірний формат email");return}l(!0),a("");try{const{error:t}=await j.auth.resetPasswordForEmail(r,{redirectTo:`${window.location.origin}/reset-password`});if(t)throw t;w(!0),d({title:"Лист відправлено!",description:"Перевірте вашу пошту для відновлення паролю"})}catch(t){a(t.message||"Помилка при відправці листа"),d({title:"Помилка",description:t.message||"Не вдалося відправити лист",variant:"destructive"})}finally{l(!1)}},S=async()=>{l(!0);try{const{error:s}=await j.auth.resetPasswordForEmail(r,{redirectTo:`${window.location.origin}/reset-password`});if(s)throw s;d({title:"Лист відправлено повторно!",description:"Перевірте вашу пошту"})}catch(s){d({title:"Помилка",description:s.message||"Не вдалося відправити лист",variant:"destructive"})}finally{l(!1)}};return v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 flex items-center justify-center px-4 py-8",children:e.jsx("div",{className:"w-full max-w-md animate-fade-in",children:e.jsxs(x,{className:"backdrop-blur-sm bg-card/95 shadow-xl border-border/50",children:[e.jsxs(u,{className:"text-center pb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(F,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsx(h,{className:"text-2xl font-semibold",children:"Лист відправлено!"}),e.jsx(f,{className:"text-muted-foreground",children:"Ми відправили інструкції для відновлення паролю на пошту"})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:['Перевірте папку "',r,'" включно з папкою "Спам"']}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 border border-border/50",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Не отримали лист?"}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:'• Перевірте папку "Спам" або "Небажані"'}),e.jsx("li",{children:"• Переконайтесь, що email введено правильно"}),e.jsx("li",{children:"• Спробуйте відправити лист повторно"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{onClick:S,disabled:i,variant:"outline",className:"w-full",children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Відправляємо..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Відправити повторно"]})}),e.jsx(o,{to:"/auth",className:"block",children:e.jsxs(m,{variant:"ghost",className:"w-full",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Повернутися до входу"]})})]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 flex items-center justify-center px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[e.jsxs(x,{className:"backdrop-blur-sm bg-card/95 shadow-xl border-border/50",children:[e.jsxs(u,{className:"space-y-1 text-center pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:"Novado"})}),e.jsx(h,{className:"text-2xl font-semibold",children:"Забули пароль?"}),e.jsx(f,{className:"text-muted-foreground",children:"Введіть ваш email і ми відправимо інструкції для відновлення паролю"})]}),e.jsxs(p,{children:[e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"email",className:"text-sm font-medium",children:"Email адреса"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(E,{id:"email",type:"email",placeholder:"Введіть ваш email",value:r,onChange:s=>{g(s.target.value),a("")},className:C("pl-10",c&&"border-red-500 focus-visible:ring-red-500")})]}),c&&e.jsx("p",{className:"text-sm text-red-500",children:c})]}),e.jsx(m,{type:"submit",className:"w-full h-11 font-medium",disabled:i,children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Відправляємо..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Відправити інструкції"]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-border/50",children:e.jsx("div",{className:"text-center",children:e.jsxs(o,{to:"/auth",className:"text-primary hover:underline font-medium inline-flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),"Повернутися до входу"]})})})]})]}),e.jsxs("p",{className:"text-center text-xs text-muted-foreground mt-6",children:["Пам'ятаєте пароль?"," ",e.jsx(o,{to:"/auth",className:"text-primary hover:underline",children:"Увійти в систему"})]})]})})}export{$ as default};
