import{c as Ze,r as n,P as O,y as X,j as f,g as F,a as et,b as Re,d as Q,e as Ee,z as tt,f as rt,A as nt,E as ot,i as at,B as lt,s as be}from"./index-KbJkRX07.js";import{R as st,P as it,O as ct,C as ut}from"./index-CAsdkEwS.js";import{u as T,h as dt,R as ft,d as pt,F as mt}from"./Combination-CN-dILO0.js";import"./dialog-C3rICmIe.js";import{S as vt}from"./search-B1u6Ento.js";import{h as ke,A as Se,i as ht,j as gt,R as xt,C as bt}from"./select-CxSQralT.js";import{M as we}from"./map-pin-0eGOnbmD.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Ze("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var ye=1,yt=.9,Ct=.8,Pt=.17,se=.1,ie=.999,Rt=.9999,Et=.99,kt=/[\\\/_+.#"@\[\(\{&]/,St=/[\\\/_+.#"@\[\(\{&]/g,Nt=/[\s-]/,Ne=/[\s-]/g;function ue(e,r,t,i,a,l,s){if(l===r.length)return a===e.length?ye:Et;var c=`${a},${l}`;if(s[c]!==void 0)return s[c];for(var h=i.charAt(l),u=t.indexOf(h,a),m=0,g,b,C,j;u>=0;)g=ue(e,r,t,i,u+1,l+1,s),g>m&&(u===a?g*=ye:kt.test(e.charAt(u-1))?(g*=Ct,C=e.slice(a,u-1).match(St),C&&a>0&&(g*=Math.pow(ie,C.length))):Nt.test(e.charAt(u-1))?(g*=yt,j=e.slice(a,u-1).match(Ne),j&&a>0&&(g*=Math.pow(ie,j.length))):(g*=Pt,a>0&&(g*=Math.pow(ie,u-a))),e.charAt(u)!==r.charAt(l)&&(g*=Rt)),(g<se&&t.charAt(u-1)===i.charAt(l+1)||i.charAt(l+1)===i.charAt(l)&&t.charAt(u-1)!==i.charAt(l))&&(b=ue(e,r,t,i,u+1,l+2,s),b*se>g&&(g=b*se)),g>m&&(m=g),u=t.indexOf(h,u+1);return s[c]=m,m}function Ce(e){return e.toLowerCase().replace(Ne," ")}function jt(e,r,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,ue(e,r,Ce(e),Ce(r),0,0,{})}var J='[cmdk-group=""]',ce='[cmdk-group-items=""]',At='[cmdk-group-heading=""]',je='[cmdk-item=""]',Pe=`${je}:not([aria-disabled="true"])`,de="cmdk-item-select",q="data-value",It=(e,r,t)=>jt(e,r,t),Ae=n.createContext(void 0),Y=()=>n.useContext(Ae),Ie=n.createContext(void 0),fe=()=>n.useContext(Ie),Oe=n.createContext(void 0),Me=n.forwardRef((e,r)=>{let t=z(()=>{var o,p;return{search:"",value:(p=(o=e.value)!=null?o:e.defaultValue)!=null?p:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),i=z(()=>new Set),a=z(()=>new Map),l=z(()=>new Map),s=z(()=>new Set),c=De(e),{label:h,children:u,value:m,onValueChange:g,filter:b,shouldFilter:C,loop:j,disablePointerSelection:G=!1,vimBindings:P=!0,...A}=e,I=T(),M=T(),D=T(),N=n.useRef(null),w=qt();L(()=>{if(m!==void 0){let o=m.trim();t.current.value=o,R.emit()}},[m]),L(()=>{w(6,me)},[]);let R=n.useMemo(()=>({subscribe:o=>(s.current.add(o),()=>s.current.delete(o)),snapshot:()=>t.current,setState:(o,p,v)=>{var d,x,y,S;if(!Object.is(t.current[o],p)){if(t.current[o]=p,o==="search")oe(),H(),w(1,ne);else if(o==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let E=document.getElementById(D);E?E.focus():(d=document.getElementById(I))==null||d.focus()}if(w(7,()=>{var E;t.current.selectedItemId=(E=V())==null?void 0:E.id,R.emit()}),v||w(5,me),((x=c.current)==null?void 0:x.value)!==void 0){let E=p??"";(S=(y=c.current).onValueChange)==null||S.call(y,E);return}}R.emit()}},emit:()=>{s.current.forEach(o=>o())}}),[]),K=n.useMemo(()=>({value:(o,p,v)=>{var d;p!==((d=l.current.get(o))==null?void 0:d.value)&&(l.current.set(o,{value:p,keywords:v}),t.current.filtered.items.set(o,U(p,v)),w(2,()=>{H(),R.emit()}))},item:(o,p)=>(i.current.add(o),p&&(a.current.has(p)?a.current.get(p).add(o):a.current.set(p,new Set([o]))),w(3,()=>{oe(),H(),t.current.value||ne(),R.emit()}),()=>{l.current.delete(o),i.current.delete(o),t.current.filtered.items.delete(o);let v=V();w(4,()=>{oe(),(v==null?void 0:v.getAttribute("id"))===o&&ne(),R.emit()})}),group:o=>(a.current.has(o)||a.current.set(o,new Set),()=>{l.current.delete(o),a.current.delete(o)}),filter:()=>c.current.shouldFilter,label:h||e["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:I,inputId:D,labelId:M,listInnerRef:N}),[]);function U(o,p){var v,d;let x=(d=(v=c.current)==null?void 0:v.filter)!=null?d:It;return o?x(o,t.current.search,p):0}function H(){if(!t.current.search||c.current.shouldFilter===!1)return;let o=t.current.filtered.items,p=[];t.current.filtered.groups.forEach(d=>{let x=a.current.get(d),y=0;x.forEach(S=>{let E=o.get(S);y=Math.max(E,y)}),p.push([d,y])});let v=N.current;W().sort((d,x)=>{var y,S;let E=d.getAttribute("id"),ee=x.getAttribute("id");return((y=o.get(ee))!=null?y:0)-((S=o.get(E))!=null?S:0)}).forEach(d=>{let x=d.closest(ce);x?x.appendChild(d.parentElement===x?d:d.closest(`${ce} > *`)):v.appendChild(d.parentElement===v?d:d.closest(`${ce} > *`))}),p.sort((d,x)=>x[1]-d[1]).forEach(d=>{var x;let y=(x=N.current)==null?void 0:x.querySelector(`${J}[${q}="${encodeURIComponent(d[0])}"]`);y==null||y.parentElement.appendChild(y)})}function ne(){let o=W().find(v=>v.getAttribute("aria-disabled")!=="true"),p=o==null?void 0:o.getAttribute(q);R.setState("value",p||void 0)}function oe(){var o,p,v,d;if(!t.current.search||c.current.shouldFilter===!1){t.current.filtered.count=i.current.size;return}t.current.filtered.groups=new Set;let x=0;for(let y of i.current){let S=(p=(o=l.current.get(y))==null?void 0:o.value)!=null?p:"",E=(d=(v=l.current.get(y))==null?void 0:v.keywords)!=null?d:[],ee=U(S,E);t.current.filtered.items.set(y,ee),ee>0&&x++}for(let[y,S]of a.current)for(let E of S)if(t.current.filtered.items.get(E)>0){t.current.filtered.groups.add(y);break}t.current.filtered.count=x}function me(){var o,p,v;let d=V();d&&(((o=d.parentElement)==null?void 0:o.firstChild)===d&&((v=(p=d.closest(J))==null?void 0:p.querySelector(At))==null||v.scrollIntoView({block:"nearest"})),d.scrollIntoView({block:"nearest"}))}function V(){var o;return(o=N.current)==null?void 0:o.querySelector(`${je}[aria-selected="true"]`)}function W(){var o;return Array.from(((o=N.current)==null?void 0:o.querySelectorAll(Pe))||[])}function ae(o){let p=W()[o];p&&R.setState("value",p.getAttribute(q))}function le(o){var p;let v=V(),d=W(),x=d.findIndex(S=>S===v),y=d[x+o];(p=c.current)!=null&&p.loop&&(y=x+o<0?d[d.length-1]:x+o===d.length?d[0]:d[x+o]),y&&R.setState("value",y.getAttribute(q))}function ve(o){let p=V(),v=p==null?void 0:p.closest(J),d;for(;v&&!d;)v=o>0?Kt(v,J):Vt(v,J),d=v==null?void 0:v.querySelector(Pe);d?R.setState("value",d.getAttribute(q)):le(o)}let he=()=>ae(W().length-1),ge=o=>{o.preventDefault(),o.metaKey?he():o.altKey?ve(1):le(1)},xe=o=>{o.preventDefault(),o.metaKey?ae(0):o.altKey?ve(-1):le(-1)};return n.createElement(O.div,{ref:r,tabIndex:-1,...A,"cmdk-root":"",onKeyDown:o=>{var p;(p=A.onKeyDown)==null||p.call(A,o);let v=o.nativeEvent.isComposing||o.keyCode===229;if(!(o.defaultPrevented||v))switch(o.key){case"n":case"j":{P&&o.ctrlKey&&ge(o);break}case"ArrowDown":{ge(o);break}case"p":case"k":{P&&o.ctrlKey&&xe(o);break}case"ArrowUp":{xe(o);break}case"Home":{o.preventDefault(),ae(0);break}case"End":{o.preventDefault(),he();break}case"Enter":{o.preventDefault();let d=V();if(d){let x=new Event(de);d.dispatchEvent(x)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:K.inputId,id:K.labelId,style:Bt},h),te(e,o=>n.createElement(Ie.Provider,{value:R},n.createElement(Ae.Provider,{value:K},o))))}),Ot=n.forwardRef((e,r)=>{var t,i;let a=T(),l=n.useRef(null),s=n.useContext(Oe),c=Y(),h=De(e),u=(i=(t=h.current)==null?void 0:t.forceMount)!=null?i:s==null?void 0:s.forceMount;L(()=>{if(!u)return c.item(a,s==null?void 0:s.id)},[u]);let m=Fe(a,l,[e.value,e.children,l],e.keywords),g=fe(),b=_(w=>w.value&&w.value===m.current),C=_(w=>u||c.filter()===!1?!0:w.search?w.filtered.items.get(a)>0:!0);n.useEffect(()=>{let w=l.current;if(!(!w||e.disabled))return w.addEventListener(de,j),()=>w.removeEventListener(de,j)},[C,e.onSelect,e.disabled]);function j(){var w,R;G(),(R=(w=h.current).onSelect)==null||R.call(w,m.current)}function G(){g.setState("value",m.current,!0)}if(!C)return null;let{disabled:P,value:A,onSelect:I,forceMount:M,keywords:D,...N}=e;return n.createElement(O.div,{ref:X(l,r),...N,id:a,"cmdk-item":"",role:"option","aria-disabled":!!P,"aria-selected":!!b,"data-disabled":!!P,"data-selected":!!b,onPointerMove:P||c.getDisablePointerSelection()?void 0:G,onClick:P?void 0:j},e.children)}),Mt=n.forwardRef((e,r)=>{let{heading:t,children:i,forceMount:a,...l}=e,s=T(),c=n.useRef(null),h=n.useRef(null),u=T(),m=Y(),g=_(C=>a||m.filter()===!1?!0:C.search?C.filtered.groups.has(s):!0);L(()=>m.group(s),[]),Fe(s,c,[e.value,e.heading,h]);let b=n.useMemo(()=>({id:s,forceMount:a}),[a]);return n.createElement(O.div,{ref:X(c,r),...l,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},t&&n.createElement("div",{ref:h,"cmdk-group-heading":"","aria-hidden":!0,id:u},t),te(e,C=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?u:void 0},n.createElement(Oe.Provider,{value:b},C))))}),Dt=n.forwardRef((e,r)=>{let{alwaysRender:t,...i}=e,a=n.useRef(null),l=_(s=>!s.search);return!t&&!l?null:n.createElement(O.div,{ref:X(a,r),...i,"cmdk-separator":"",role:"separator"})}),Ft=n.forwardRef((e,r)=>{let{onValueChange:t,...i}=e,a=e.value!=null,l=fe(),s=_(u=>u.search),c=_(u=>u.selectedItemId),h=Y();return n.useEffect(()=>{e.value!=null&&l.setState("search",e.value)},[e.value]),n.createElement(O.input,{ref:r,...i,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":h.listId,"aria-labelledby":h.labelId,"aria-activedescendant":c,id:h.inputId,type:"text",value:a?e.value:s,onChange:u=>{a||l.setState("search",u.target.value),t==null||t(u.target.value)}})}),_t=n.forwardRef((e,r)=>{let{children:t,label:i="Suggestions",...a}=e,l=n.useRef(null),s=n.useRef(null),c=_(u=>u.selectedItemId),h=Y();return n.useEffect(()=>{if(s.current&&l.current){let u=s.current,m=l.current,g,b=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let C=u.offsetHeight;m.style.setProperty("--cmdk-list-height",C.toFixed(1)+"px")})});return b.observe(u),()=>{cancelAnimationFrame(g),b.unobserve(u)}}},[]),n.createElement(O.div,{ref:X(l,r),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":c,"aria-label":i,id:h.listId},te(e,u=>n.createElement("div",{ref:X(s,h.listInnerRef),"cmdk-list-sizer":""},u)))}),$t=n.forwardRef((e,r)=>{let{open:t,onOpenChange:i,overlayClassName:a,contentClassName:l,container:s,...c}=e;return n.createElement(st,{open:t,onOpenChange:i},n.createElement(it,{container:s},n.createElement(ct,{"cmdk-overlay":"",className:a}),n.createElement(ut,{"aria-label":e.label,"cmdk-dialog":"",className:l},n.createElement(Me,{ref:r,...c}))))}),Tt=n.forwardRef((e,r)=>_(t=>t.filtered.count===0)?n.createElement(O.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null),Lt=n.forwardRef((e,r)=>{let{progress:t,children:i,label:a="Loading...",...l}=e;return n.createElement(O.div,{ref:r,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},te(e,s=>n.createElement("div",{"aria-hidden":!0},s)))}),k=Object.assign(Me,{List:_t,Item:Ot,Input:Ft,Group:Mt,Separator:Dt,Dialog:$t,Empty:Tt,Loading:Lt});function Kt(e,r){let t=e.nextElementSibling;for(;t;){if(t.matches(r))return t;t=t.nextElementSibling}}function Vt(e,r){let t=e.previousElementSibling;for(;t;){if(t.matches(r))return t;t=t.previousElementSibling}}function De(e){let r=n.useRef(e);return L(()=>{r.current=e}),r}var L=typeof window>"u"?n.useEffect:n.useLayoutEffect;function z(e){let r=n.useRef();return r.current===void 0&&(r.current=e()),r}function _(e){let r=fe(),t=()=>e(r.snapshot());return n.useSyncExternalStore(r.subscribe,t,t)}function Fe(e,r,t,i=[]){let a=n.useRef(),l=Y();return L(()=>{var s;let c=(()=>{var u;for(let m of t){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(u=m.current.textContent)==null?void 0:u.trim():a.current}})(),h=i.map(u=>u.trim());l.value(e,c,h),(s=r.current)==null||s.setAttribute(q,c),a.current=c}),a}var qt=()=>{let[e,r]=n.useState(),t=z(()=>new Map);return L(()=>{t.current.forEach(i=>i()),t.current=new Map},[e]),(i,a)=>{t.current.set(i,a),r({})}};function zt(e){let r=e.type;return typeof r=="function"?r(e.props):"render"in r?r.render(e.props):e}function te({asChild:e,children:r},t){return e&&n.isValidElement(r)?n.cloneElement(zt(r),{ref:r.ref},t(r.props.children)):t(r)}var Bt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const _e=n.forwardRef(({className:e,...r},t)=>f.jsx(k,{ref:t,className:F("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...r}));_e.displayName=k.displayName;const $e=n.forwardRef(({className:e,...r},t)=>f.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[f.jsx(vt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),f.jsx(k.Input,{ref:t,className:F("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...r})]}));$e.displayName=k.Input.displayName;const Gt=n.forwardRef(({className:e,...r},t)=>f.jsx(k.List,{ref:t,className:F("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...r}));Gt.displayName=k.List.displayName;const Te=n.forwardRef((e,r)=>f.jsx(k.Empty,{ref:r,className:"py-6 text-center text-sm",...e}));Te.displayName=k.Empty.displayName;const Le=n.forwardRef(({className:e,...r},t)=>f.jsx(k.Group,{ref:t,className:F("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...r}));Le.displayName=k.Group.displayName;const Ut=n.forwardRef(({className:e,...r},t)=>f.jsx(k.Separator,{ref:t,className:F("-mx-1 h-px bg-border",e),...r}));Ut.displayName=k.Separator.displayName;const Ke=n.forwardRef(({className:e,...r},t)=>f.jsx(k.Item,{ref:t,className:F("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...r}));Ke.displayName=k.Item.displayName;var re="Popover",[Ve,vr]=et(re,[ke]),Z=ke(),[Ht,$]=Ve(re),qe=e=>{const{__scopePopover:r,children:t,open:i,defaultOpen:a,onOpenChange:l,modal:s=!1}=e,c=Z(r),h=n.useRef(null),[u,m]=n.useState(!1),[g,b]=rt({prop:i,defaultProp:a??!1,onChange:l,caller:re});return f.jsx(xt,{...c,children:f.jsx(Ht,{scope:r,contentId:T(),triggerRef:h,open:g,onOpenChange:b,onOpenToggle:n.useCallback(()=>b(C=>!C),[b]),hasCustomAnchor:u,onCustomAnchorAdd:n.useCallback(()=>m(!0),[]),onCustomAnchorRemove:n.useCallback(()=>m(!1),[]),modal:s,children:t})})};qe.displayName=re;var ze="PopoverAnchor",Wt=n.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,a=$(ze,t),l=Z(t),{onCustomAnchorAdd:s,onCustomAnchorRemove:c}=a;return n.useEffect(()=>(s(),()=>c()),[s,c]),f.jsx(Se,{...l,...i,ref:r})});Wt.displayName=ze;var Be="PopoverTrigger",Ge=n.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,a=$(Be,t),l=Z(t),s=Re(r,a.triggerRef),c=f.jsx(O.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Qe(a.open),...i,ref:s,onClick:Q(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?c:f.jsx(Se,{asChild:!0,...l,children:c})});Ge.displayName=Be;var pe="PopoverPortal",[Jt,Qt]=Ve(pe,{forceMount:void 0}),Ue=e=>{const{__scopePopover:r,forceMount:t,children:i,container:a}=e,l=$(pe,r);return f.jsx(Jt,{scope:r,forceMount:t,children:f.jsx(Ee,{present:t||l.open,children:f.jsx(nt,{asChild:!0,container:a,children:i})})})};Ue.displayName=pe;var B="PopoverContent",He=n.forwardRef((e,r)=>{const t=Qt(B,e.__scopePopover),{forceMount:i=t.forceMount,...a}=e,l=$(B,e.__scopePopover);return f.jsx(Ee,{present:i||l.open,children:l.modal?f.jsx(Yt,{...a,ref:r}):f.jsx(Zt,{...a,ref:r})})});He.displayName=B;var Xt=ot("PopoverContent.RemoveScroll"),Yt=n.forwardRef((e,r)=>{const t=$(B,e.__scopePopover),i=n.useRef(null),a=Re(r,i),l=n.useRef(!1);return n.useEffect(()=>{const s=i.current;if(s)return dt(s)},[]),f.jsx(ft,{as:Xt,allowPinchZoom:!0,children:f.jsx(We,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Q(e.onCloseAutoFocus,s=>{var c;s.preventDefault(),l.current||(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Q(e.onPointerDownOutside,s=>{const c=s.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0,u=c.button===2||h;l.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Q(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),Zt=n.forwardRef((e,r)=>{const t=$(B,e.__scopePopover),i=n.useRef(!1),a=n.useRef(!1);return f.jsx(We,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var s,c;(s=e.onCloseAutoFocus)==null||s.call(e,l),l.defaultPrevented||(i.current||(c=t.triggerRef.current)==null||c.focus(),l.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:l=>{var h,u;(h=e.onInteractOutside)==null||h.call(e,l),l.defaultPrevented||(i.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=l.target;((u=t.triggerRef.current)==null?void 0:u.contains(s))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),We=n.forwardRef((e,r)=>{const{__scopePopover:t,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:h,onFocusOutside:u,onInteractOutside:m,...g}=e,b=$(B,t),C=Z(t);return pt(),f.jsx(mt,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:a,onUnmountAutoFocus:l,children:f.jsx(tt,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:m,onEscapeKeyDown:c,onPointerDownOutside:h,onFocusOutside:u,onDismiss:()=>b.onOpenChange(!1),children:f.jsx(ht,{"data-state":Qe(b.open),role:"dialog",id:b.contentId,...C,...g,ref:r,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Je="PopoverClose",er=n.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,a=$(Je,t);return f.jsx(O.button,{type:"button",...i,ref:r,onClick:Q(e.onClick,()=>a.onOpenChange(!1))})});er.displayName=Je;var tr="PopoverArrow",rr=n.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,a=Z(t);return f.jsx(gt,{...a,...i,ref:r})});rr.displayName=tr;function Qe(e){return e?"open":"closed"}var nr=qe,or=Ge,ar=Ue,Xe=He;const lr=nr,sr=or,Ye=n.forwardRef(({className:e,align:r="center",sideOffset:t=4,...i},a)=>f.jsx(ar,{children:f.jsx(Xe,{ref:a,align:r,sideOffset:t,className:F("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...i})}));Ye.displayName=Xe.displayName;function hr({value:e,onChange:r,placeholder:t="Оберіть місто...",className:i,showRegionsOnEmpty:a=!0}){const[l,s]=n.useState(!1),[c,h]=n.useState(""),[u,m]=n.useState([]),[g,b]=n.useState(!1),{toast:C}=at(),j=(P,A)=>{const I=A.toLowerCase().trim();return P.sort((M,D)=>{const N=M.name.toLowerCase()===I,w=D.name.toLowerCase()===I;if(N&&!w)return-1;if(!N&&w)return 1;const R=H=>{switch(H){case"обл.":return 1;case"р-н":return 2;case"м.":return 3;case"смт":return 4;case"с-ще":return 5;case"с.":return 6;default:return 7}},K=R(M.type),U=R(D.type);return K!==U?K-U:M.name.localeCompare(D.name,"uk")})};n.useEffect(()=>{const A=setTimeout(async()=>{if(!a&&c.length<2){m([]);return}b(!0);try{const{data:I,error:M}=await be.functions.invoke("katottg-cities",{body:{query:c}});if(M){console.error("Error fetching cities:",M),C({title:"Помилка",description:"Не вдалося завантажити міста",variant:"destructive"}),m([]);return}const D=I.cities||[],N=j(D,c);m(N)}catch(I){console.error("Error:",I),C({title:"Помилка",description:"Не вдалося завантажити міста",variant:"destructive"}),m([])}finally{b(!1)}},300);return()=>clearTimeout(A)},[c,a,C]);const G=async P=>{r(P.fullName),s(!1);try{await be.functions.invoke("track-search",{body:{query:P.fullName,queryType:"location"}})}catch(A){console.error("Error tracking search:",A)}};return f.jsxs(lr,{open:l,onOpenChange:s,children:[f.jsx(sr,{asChild:!0,children:f.jsxs(lt,{variant:"outline",role:"combobox","aria-expanded":l,className:F("w-full justify-between text-left font-normal",i),children:[f.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[f.jsx(we,{className:"w-4 h-4 mr-2 shrink-0 text-muted-foreground"}),f.jsx("span",{className:"truncate",children:e||t})]}),f.jsx(wt,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),f.jsx(Ye,{className:"w-[var(--radix-popover-trigger-width)] max-w-[95vw] p-0",align:"start",children:f.jsxs(_e,{children:[f.jsx($e,{placeholder:"Введіть назву населеного пункту...",value:c,onValueChange:h}),f.jsx(Te,{children:g?"Завантаження...":"Населені пункти не знайдено"}),f.jsx(Le,{className:"max-h-64 overflow-auto",children:u.map(P=>f.jsxs(Ke,{value:P.fullName,onSelect:()=>G(P),className:"flex items-start gap-2 p-3",children:[f.jsx(bt,{className:F("mt-0.5 h-4 w-4 shrink-0",e===P.fullName?"opacity-100":"opacity-0")}),f.jsx(we,{className:"mt-0.5 w-4 h-4 shrink-0 text-muted-foreground"}),f.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[f.jsxs("span",{className:"font-medium truncate",children:[P.type," ",P.name]}),P.region&&f.jsx("span",{className:"text-sm text-muted-foreground truncate",children:P.region})]})]},P.code))})]})})]})}export{wt as C,hr as K};
