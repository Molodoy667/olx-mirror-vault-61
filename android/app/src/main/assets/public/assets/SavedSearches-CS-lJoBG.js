import{u as k,r as P,j as s,k as v,m as B,n as M,o as T,B as a,g as q,p as H,h as z,L as j}from"./index-KbJkRX07.js";import{D as E,c as F,d as L,e as c,H as u,b as f}from"./Footer-CG381HwE.js";import{M as g}from"./MobileNav-iDjdoy_U.js";import{B as $}from"./badge-DpjjU75J.js";import{u as R,a as A,b as U,S as d}from"./SaveSearchDialog-a3qxPSbS.js";import{S as n}from"./search-B1u6Ento.js";import{C as I}from"./calendar-CuXXWuSH.js";import{B as N}from"./globe-BvyP_gKp.js";import{B as b}from"./bell-off-DNtwkVSf.js";import{E as O,P as w,B as y}from"./play-r6ugd_rc.js";import{S as V}from"./square-pen-q68WjATM.js";import{T as W}from"./trash-2-CCvey3Fk.js";import{T as G}from"./tag-BAG7-RLY.js";import{M as J}from"./map-pin-0eGOnbmD.js";import{D as K}from"./dollar-sign--DFDUvgJ.js";import{f as Q,u as X}from"./uk-Drv84rxe.js";import{P as x}from"./plus-D5zmitre.js";import{H as Y}from"./heart-BstkNJZ-.js";import"./useAdmin-wN6CKAL8.js";import"./Combination-CN-dILO0.js";import"./index-D5jjwgwZ.js";import"./select-CxSQralT.js";import"./index-ohYBQjSJ.js";import"./star-B840Te7u.js";import"./eye-jg7wg44x.js";import"./avatar-CGybcn-y.js";import"./user-Dt39FPRe.js";import"./input-BfmWFPkP.js";import"./label-CwWGJCIM.js";import"./switch-RRtVucGl.js";import"./dialog-C3rICmIe.js";import"./index-CAsdkEwS.js";import"./useQuery-DYBXd3SC.js";import"./useMutation-BJki3aSv.js";import"./save-CCtX2FOD.js";function Z({savedSearch:e}){const t=k(),o=R(),r=A(),[l,p]=P.useState(!1),h=()=>{const i=new URLSearchParams;e.query&&i.set("q",e.query),e.category_id&&i.set("category",e.category_id),e.location&&i.set("location",e.location),e.min_price&&i.set("minPrice",e.min_price.toString()),e.max_price&&i.set("maxPrice",e.max_price.toString()),e.condition&&i.set("condition",e.condition),e.only_with_photo&&i.set("onlyWithPhoto","true"),e.only_promoted&&i.set("onlyPromoted","true"),t(`/search?${i.toString()}`)},_=()=>{o.mutate({id:e.id,updates:{notifications_enabled:!e.notifications_enabled}})},C=()=>{l?(r.mutate(e.id),p(!1)):p(!0)},D=()=>{const i=[];if(e.query&&i.push({icon:n,label:e.query}),e.categories&&i.push({icon:G,label:e.categories.name_uk||e.categories.name}),e.location&&i.push({icon:J,label:e.location}),e.min_price||e.max_price){const m=`${e.min_price||0} - ${e.max_price||"∞"} грн`;i.push({icon:K,label:m})}return e.condition&&i.push({label:`Стан: ${e.condition}`}),e.only_with_photo&&i.push({label:"З фото"}),e.only_promoted&&i.push({label:"Промо"}),i};return s.jsxs(v,{className:"group hover:shadow-md transition-all duration-200 border-l-4 border-l-primary/20 hover:border-l-primary",children:[s.jsx(B,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs(M,{className:"text-lg flex items-center gap-2 mb-1",children:[s.jsx(n,{className:"w-4 h-4 text-primary flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e.name})]}),s.jsxs(T,{className:"flex items-center gap-1 text-xs",children:[s.jsx(I,{className:"w-3 h-3"}),"Створено ",Q(new Date(e.created_at),{addSuffix:!0,locale:X})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(a,{variant:"ghost",size:"sm",onClick:_,className:q("p-2 h-8 w-8",e.notifications_enabled?"text-primary":"text-muted-foreground"),children:e.notifications_enabled?s.jsx(N,{className:"w-4 h-4"}):s.jsx(b,{className:"w-4 h-4"})}),s.jsxs(E,{children:[s.jsx(F,{asChild:!0,children:s.jsx(a,{variant:"ghost",size:"sm",className:"p-2 h-8 w-8",children:s.jsx(O,{className:"w-4 h-4"})})}),s.jsxs(L,{align:"end",children:[s.jsxs(c,{onClick:h,children:[s.jsx(w,{className:"w-4 h-4 mr-2"}),"Запустити пошук"]}),s.jsxs(c,{children:[s.jsx(V,{className:"w-4 h-4 mr-2"}),"Редагувати"]}),s.jsxs(c,{onClick:C,className:l?"text-destructive":"",children:[s.jsx(W,{className:"w-4 h-4 mr-2"}),l?"Підтвердити видалення":"Видалити"]})]})]})]})]})}),s.jsx(H,{className:"pt-0",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:D().map((i,m)=>s.jsxs($,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[i.icon&&s.jsx(i.icon,{className:"w-3 h-3"}),i.label]},m))}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[s.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:e.notifications_enabled?s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-3 h-3 text-green-500"}),s.jsx("span",{children:"Сповіщення увімкнені"})]}):s.jsxs(s.Fragment,{children:[s.jsx(b,{className:"w-3 h-3"}),s.jsx("span",{children:"Сповіщення вимкнені"})]})}),s.jsxs(a,{onClick:h,size:"sm",className:"hover:scale-105 transition-transform duration-200",children:[s.jsx(w,{className:"w-3 h-3 mr-1"}),"Пошук"]})]})]})})]})}function zs(){const{user:e}=z(),{data:t,isLoading:o}=U();return e?s.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-0",children:[s.jsx(u,{}),s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary-dark bg-clip-text text-transparent flex items-center gap-3",children:[s.jsx(y,{className:"w-8 h-8 text-primary"}),"Збережені пошуки"]}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Управляйте збереженими пошуками та налаштуваннями сповіщень"})]}),s.jsx(d,{filters:{},className:"hidden md:flex",children:s.jsxs(a,{className:"gap-2",children:[s.jsx(x,{className:"w-4 h-4"}),"Створити пошук"]})})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{className:"w-4 h-4"}),s.jsxs("span",{children:[(t==null?void 0:t.length)||0," збережених пошуків"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Y,{className:"w-4 h-4"}),s.jsxs("span",{children:[(t==null?void 0:t.filter(r=>r.notifications_enabled).length)||0," з увімкненими сповіщеннями"]})]})]})]}),o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((r,l)=>s.jsxs("div",{className:"bg-card rounded-lg p-6 animate-pulse",children:[s.jsx("div",{className:"h-6 bg-muted rounded mb-4"}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-16"}),s.jsx("div",{className:"h-6 bg-muted rounded w-20"})]})]},l))}):t&&t.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(r=>s.jsx(Z,{savedSearch:r},r.id))}):s.jsxs("div",{className:"text-center py-12 max-w-md mx-auto",children:[s.jsx(n,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Немає збережених пошуків"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Створіть перший збережений пошук, щоб отримувати сповіщення про нові оголошення"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(d,{filters:{},children:s.jsxs(a,{className:"w-full gap-2",children:[s.jsx(x,{className:"w-4 h-4"}),"Створити збережений пошук"]})}),s.jsx(j,{to:"/search",children:s.jsxs(a,{variant:"outline",className:"w-full gap-2",children:[s.jsx(n,{className:"w-4 h-4"}),"Перейти до пошуку"]})})]})]}),s.jsx("div",{className:"fixed bottom-24 right-4 md:hidden",children:s.jsx(d,{filters:{},children:s.jsx(a,{size:"lg",className:"rounded-full h-14 w-14 shadow-lg",children:s.jsx(x,{className:"w-6 h-6"})})})})]}),s.jsx(f,{}),s.jsx(g,{})]}):s.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-0",children:[s.jsx(u,{}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"text-center max-w-md mx-auto",children:[s.jsx(y,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Збережені пошуки"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Увійдіть в акаунт, щоб переглянути збережені пошуки"}),s.jsx(j,{to:"/auth",children:s.jsx(a,{children:"Увійти в акаунт"})})]})}),s.jsx(f,{}),s.jsx(g,{})]})}export{zs as default};
