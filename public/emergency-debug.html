<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Debug</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #ff4444; 
            color: white;
            font-size: 18px;
        }
        .box { 
            background: rgba(0,0,0,0.3); 
            padding: 20px; 
            margin: 10px 0; 
            border-radius: 5px; 
        }
    </style>
</head>
<body>
    <h1>üö® EMERGENCY DEBUG</h1>
    <div class="box">
        <h2>‚úÖ –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ - HTML —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
        <p>–í—Ä–µ–º—è: <span id="time">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
        <p>URL: <span id="url">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
    </div>
    
    <div class="box">
        <h3>–¢–µ—Å—Ç—ã JavaScript:</h3>
        <div id="js-tests">–¢–µ—Å—Ç–∏—Ä—É–µ–º...</div>
    </div>
    
    <div class="box">
        <h3>–ü—Ä–æ–≤–µ—Ä—è–µ–º index.html:</h3>
        <button onclick="checkIndex()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
        <div id="index-result"></div>
    </div>
    
    <script>
        // –°–∞–º—ã–µ –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
        try {
            document.getElementById('time').textContent = new Date().toLocaleString();
            document.getElementById('url').textContent = window.location.href;
            
            let tests = '';
            tests += '‚úÖ document.getElementById —Ä–∞–±–æ—Ç–∞–µ—Ç<br>';
            tests += '‚úÖ Date() —Ä–∞–±–æ—Ç–∞–µ—Ç<br>';
            tests += '‚úÖ window.location —Ä–∞–±–æ—Ç–∞–µ—Ç<br>';
            
            if (typeof fetch !== 'undefined') {
                tests += '‚úÖ fetch API –¥–æ—Å—Ç—É–ø–µ–Ω<br>';
            } else {
                tests += '‚ùå fetch API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω<br>';
            }
            
            try {
                localStorage.setItem('test', 'ok');
                localStorage.removeItem('test');
                tests += '‚úÖ localStorage —Ä–∞–±–æ—Ç–∞–µ—Ç<br>';
            } catch(e) {
                tests += '‚ùå localStorage: ' + e.message + '<br>';
            }
            
            document.getElementById('js-tests').innerHTML = tests;
            
        } catch (error) {
            document.getElementById('js-tests').innerHTML = '‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ JS: ' + error.message;
        }
        
        function checkIndex() {
            const result = document.getElementById('index-result');
            result.innerHTML = '–ü—Ä–æ–≤–µ—Ä—è–µ–º...';
            
            fetch('/')
                .then(response => response.text())
                .then(html => {
                    if (html.includes('<div id="root">')) {
                        result.innerHTML = '‚úÖ index.html –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç div#root';
                        
                        // –ò—â–µ–º –≥–ª–∞–≤–Ω—ã–π JS —Ñ–∞–π–ª
                        const scriptMatch = html.match(/src="([^"]*index[^"]*\.js)"/);
                        if (scriptMatch) {
                            result.innerHTML += '<br>üìù JS —Ñ–∞–π–ª: ' + scriptMatch[1];
                            
                            // –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å JS
                            const script = document.createElement('script');
                            script.src = scriptMatch[1];
                            script.onload = () => {
                                result.innerHTML += '<br>‚úÖ JS —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω';
                            };
                            script.onerror = () => {
                                result.innerHTML += '<br>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JS —Ñ–∞–π–ª–∞';
                            };
                            document.head.appendChild(script);
                        }
                    } else {
                        result.innerHTML = '‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å index.html';
                    }
                })
                .catch(error => {
                    result.innerHTML = '‚ùå –û—à–∏–±–∫–∞: ' + error.message;
                });
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(checkIndex, 2000);
    </script>
</body>
</html>